name: Test OAuth Token

on:
  workflow_dispatch:
  push:
    branches: [master]

jobs:
  test-token:
    runs-on: ubuntu-latest
    
    steps:
      - name: Check Secrets
        run: |
          echo "ğŸ” Checking OAuth Token Configuration"
          echo "====================================="
          echo ""
          
          # ãƒˆãƒ¼ã‚¯ãƒ³ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªï¼ˆå€¤ã¯è¡¨ç¤ºã—ãªã„ï¼‰
          if [ -n "${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}" ]; then
            echo "âœ… CLAUDE_CODE_OAUTH_TOKEN is set"
            echo "   Length: ${#CLAUDE_CODE_OAUTH_TOKEN} characters"
          else
            echo "âŒ CLAUDE_CODE_OAUTH_TOKEN is NOT set"
          fi
          
          echo ""
          echo "ğŸ“ Using OAuth token in claude-code-action"
          
      - name: Test Claude Code Action
        uses: anthropics/claude-code-action@v1
        with:
          claude_code_oauth_token: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
          github_token: ${{ secrets.GITHUB_TOKEN }}
        env:
          CLAUDE_DEBUG: true